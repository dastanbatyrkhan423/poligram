{% extends 'base.html' %}
{% load static %}

{% block title %}{{ company.name|default:"ТОО Poligram" }}{% endblock %}

{% block meta_description %}{{ company.meta_description|default:"Строительно-проектная компания" }}{% endblock %}

{% block extra_css %}
<style>
    /* Секция "Наши услуги" */
    .our-services-section {
        padding: 5rem 0;
        background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
        position: relative;
        overflow: hidden;
    }
    
    .our-services-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #60a5fa, #3b82f6);
        background-size: 200% 100%;
        animation: gradientShift 3s ease infinite;
    }
    
    @keyframes gradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .services-section-header {
        text-align: center;
        margin-bottom: 4rem;
    }
    
    .services-section-title {
        font-size: 3rem;
        font-weight: 700;
        color: #1e3a8a;
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
    }
    
    .services-section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #60a5fa);
        border-radius: 2px;
    }
    
    .services-section-subtitle {
        font-size: 1.2rem;
        color: #64748b;
        margin-top: 1.5rem;
    }
    
    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
        max-width: 1400px;
        margin: 0 auto;
    }
    
    .service-card {
        background: #ffffff;
        border-radius: 16px;
        padding: 2.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border: 1px solid #e2e8f0;
        cursor: pointer;
    }
    
    .service-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #60a5fa);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    }
    
    .service-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15);
        border-color: #3b82f6;
    }
    
    .service-card:hover::before {
        transform: scaleX(1);
    }
    
    .service-card-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        color: white;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }
    
    .service-card:hover .service-card-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    }
    
    .service-card-icon svg {
        width: 40px;
        height: 40px;
        stroke-width: 2.5;
    }
    
    .service-card-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #1e3a8a;
        margin-bottom: 1rem;
        line-height: 1.4;
    }
    
    .service-card-description {
        font-size: 1rem;
        color: #64748b;
        line-height: 1.7;
        margin: 0;
    }
    
    /* Адаптивность */
    @media (max-width: 1024px) {
        .services-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .service-card {
            padding: 2rem;
        }
    }
    
    @media (max-width: 768px) {
        .our-services-section {
            padding: 3rem 0;
        }
        
        .services-section-title {
            font-size: 2.2rem;
        }
        
        .services-section-subtitle {
            font-size: 1rem;
        }
        
        .services-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .service-card {
            padding: 1.5rem;
        }
        
        .service-card-icon {
            width: 70px;
            height: 70px;
        }
        
        .service-card-icon svg {
            width: 35px;
            height: 35px;
        }
        
        .service-card-title {
            font-size: 1.3rem;
        }
    }
    
    @media (max-width: 480px) {
        .services-section-title {
            font-size: 1.8rem;
        }
        
        .service-card {
            padding: 1.25rem;
        }
    }
    
    /* Кнопка "Все услуги" */
    .service-read-more-btn {
        display: inline-block;
        padding: 1rem 3rem;
        font-size: 1.1rem;
        background: #3b82f6;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }
    
    .service-read-more-btn:hover {
        background: #2563eb;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }
    
    /* Certificates Section (Davydov Style) */
    .certificates-section {
        padding: 6rem 0;
        background: #1e3a8a;
        position: relative;
        overflow: hidden;
    }
    
    .certificates-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #60a5fa, #3b82f6);
        background-size: 200% 100%;
        animation: gradientShift 3s ease infinite;
    }
    
    .certificates-section-header {
        text-align: center;
        margin-bottom: 4rem;
    }
    
    .certificates-section-title {
        font-size: 3rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .certificates-section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: linear-gradient(90deg, #60a5fa, #3b82f6);
        border-radius: 2px;
    }
    
    .certificates-section-subtitle {
        font-size: 1.2rem;
        color: rgba(255, 255, 255, 0.9);
        margin-top: 1.5rem;
    }
    
    .certificates-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }
    
    .certificate-card {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        cursor: pointer;
        display: flex;
        flex-direction: column;
    }
    
    .certificate-card:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.4);
        transform: translateY(-8px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .certificate-image-wrapper {
        position: relative;
        width: 100%;
        height: 300px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.05);
    }
    
    .certificate-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    
    .certificate-card:hover .certificate-image {
        transform: scale(1.05);
    }
    
    .certificate-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(30, 58, 138, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .certificate-card:hover .certificate-overlay {
        opacity: 1;
    }
    
    .certificate-info {
        text-align: center;
        color: white;
    }
    
    .certificate-view-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.75rem;
        width: 64px;
        height: 64px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }
    
    .certificate-card:hover .certificate-view-icon {
        background: rgba(255, 255, 255, 0.25);
        transform: scale(1.1);
    }
    
    .certificate-view-icon svg {
        width: 32px;
        height: 32px;
        color: white;
        stroke: white;
    }
    
    .certificate-view-text {
        font-size: 1.1rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .certificate-content {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .certificate-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 0.75rem;
        line-height: 1.4;
    }
    
    .certificate-number {
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 0.5rem;
    }
    
    .certificate-issuer {
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 0.75rem;
    }
    
    .certificate-date {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
        font-size: 0.85rem;
    }
    
    .certificate-date-label {
        color: rgba(255, 255, 255, 0.7);
    }
    
    .certificate-date-value {
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
    }
    
    .certificate-validity {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        padding-top: 0.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .certificate-validity-label {
        color: rgba(255, 255, 255, 0.7);
    }
    
    .certificate-validity-value {
        font-weight: 600;
    }
    
    .certificate-validity.valid .certificate-validity-value {
        color: #4ade80;
    }
    
    .certificate-validity.expired .certificate-validity-value {
        color: #f87171;
    }
    
    .certificate-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.5);
        font-size: 1.2rem;
    }
    
    .certificates-more-wrapper {
        text-align: center;
        margin-top: 3rem;
    }
    
    .certificates-more-btn {
        display: inline-block;
        background: linear-gradient(90deg, #3b82f6, #60a5fa);
        color: white;
        padding: 1rem 2.5rem;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
        border: none;
        cursor: pointer;
    }
    
    .certificates-more-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
        background: linear-gradient(90deg, #60a5fa, #3b82f6);
    }
    
    /* Certificate Modal */
    .certificate-modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        overflow: auto;
    }
    
    .certificate-modal-content {
        position: relative;
        background-color: #ffffff;
        margin: 2% auto;
        padding: 2rem;
        border-radius: 16px;
        width: 90%;
        max-width: 900px;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .certificate-modal-close {
        position: absolute;
        top: 1rem;
        right: 1.5rem;
        color: #64748b;
        font-size: 2.5rem;
        font-weight: bold;
        cursor: pointer;
        z-index: 10001;
        transition: color 0.2s ease;
    }
    
    .certificate-modal-close:hover {
        color: #1e3a8a;
    }
    
    .certificate-modal-image-container {
        width: 100%;
        margin-bottom: 2rem;
        text-align: center;
    }
    
    .certificate-modal-image {
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
    
    .certificate-modal-info {
        padding: 1rem 0;
    }
    
    .certificate-modal-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: #1e3a8a;
        margin-bottom: 1.5rem;
    }
    
    .certificate-modal-detail {
        font-size: 1rem;
        color: #4a5568;
        margin-bottom: 0.75rem;
        line-height: 1.6;
    }
    
    .certificate-modal-detail strong {
        color: #1e3a8a;
    }
    
    /* Адаптивность для сертификатов */
    @media (max-width: 1024px) {
        .certificates-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
    }
    
    @media (max-width: 768px) {
        .certificates-section {
            padding: 4rem 0;
        }
        
        .certificates-section-title {
            font-size: 2.2rem;
        }
        
        .certificates-section-subtitle {
            font-size: 1rem;
        }
        
        .certificates-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .certificate-image-wrapper {
            height: 250px;
        }
        
        .certificate-modal-content {
            width: 95%;
            padding: 1.5rem;
            margin: 5% auto;
        }
    }
</style>
{% endblock %}

{% block content %}

<!-- Full Screen Hero Image Section -->
<section class="video-hero-section">
    <div class="video-container">
        <img src="{% static 'images/полигр123.png' %}" alt="Poligram" class="hero-image">
        <div class="video-overlay"></div>
        <div class="hero-content">
            <div class="hero-text-wrapper">
                {% if company %}
                <h1 class="hero-title">{{ company.name|upper }}</h1>
                <div class="hero-subtitle" style="color: #ffffff !important; opacity: 1 !important;">{{ company.short_description|safe|truncatewords:20 }}</div>
                {% else %}
                <h1 class="hero-title">СТРОИТЕЛЬСТВО И ПРОЕКТИРОВАНИЕ В КАЗАХСТАНЕ</h1>
                <p class="hero-subtitle" style="color: #ffffff !important; opacity: 1 !important; font-weight: 700 !important;">Ведущая строительная компания с 19-летним опытом. Полный цикл работ от проектирования до строительства.</p>
                {% endif %}
                <div class="hero-buttons">
                    <a href="{% url 'contact:contact' %}" class="hero-btn hero-btn-primary">
                        <span>СВЯЗАТЬСЯ С НАМИ</span>
                    </a>
                    <a href="{% url 'core:about' %}" class="hero-btn hero-btn-secondary">
                        <span>УЗНАТЬ БОЛЬШЕ →</span>
                    </a>
                </div>
                <div class="hero-scroll-indicator">
                    <span>Прокрутите вниз</span>
                    <div class="scroll-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 8v8"/>
                            <path d="M8 12l4 4 4-4"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Services Categories Section (Davydov Style) -->
<section class="services-categories-section">
    <div class="container">
        <div class="services-categories-grid">
            <a href="{% url 'services:category_detail' 'proektirovanie' %}" class="service-category-btn">
                ПРОЕКТИРОВАНИЕ
            </a>
            <a href="{% url 'services:category_detail' 'stroitelstvo' %}" class="service-category-btn">
                СТРОИТЕЛЬСТВО
            </a>
            <a href="{% url 'services:category_detail' 'izyiskaniya' %}" class="service-category-btn">
                ИЗЫСКАНИЯ
            </a>
            <a href="{% url 'services:category_detail' 'dorogi' %}" class="service-category-btn">
                ДОРОГИ
            </a>
        </div>
    </div>
</section>

<!-- Services Cards Section (Davydov Style) -->
<section class="services-cards-section">
    <div class="container">
        <div class="services-cards-grid">
            <!-- Card 1: Проектирование -->
            <div class="service-card-large">
                <div class="service-card-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <rect x="7" y="7" width="10" height="10" rx="1" ry="1"/>
                    </svg>
                </div>
                <h3 class="service-card-title">
                    {% if service_categories.0 %}{{ service_categories.0.name|upper }}{% else %}ПРОЕКТИРОВАНИЕ{% endif %}
                </h3>
                <div class="service-card-list">
                    {% if first_services_list.0 %}
                        <div class="service-item">{{ first_services_list.0.name|upper }}</div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Card 2: Строительство -->
            <div class="service-card-large">
                <div class="service-card-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 21h18"/>
                        <path d="M5 21V7l8-4v18"/>
                        <path d="M19 21V11l-6-4"/>
                    </svg>
                </div>
                <h3 class="service-card-title">
                    {% if service_categories.1 %}{{ service_categories.1.name|upper }}{% else %}СТРОИТЕЛЬСТВО{% endif %}
                </h3>
                <div class="service-card-list">
                    {% if first_services_list.1 %}
                        <div class="service-item">{{ first_services_list.1.name|upper }}</div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Card 3: Изыскания -->
            <div class="service-card-large">
                <div class="service-card-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2v20M2 12h20"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </div>
                <h3 class="service-card-title">
                    {% if service_categories.2 %}{{ service_categories.2.name|upper }}{% else %}ИЗЫСКАНИЯ{% endif %}
                </h3>
                <div class="service-card-list">
                    {% if first_services_list.2 %}
                        <div class="service-item">{{ first_services_list.2.name|upper }}</div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Card 4: Дороги -->
            <div class="service-card-large">
                <div class="service-card-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 12h20"/>
                        <path d="M6 8h12"/>
                        <path d="M6 16h12"/>
                    </svg>
                </div>
                <h3 class="service-card-title">
                    {% if service_categories.3 %}{{ service_categories.3.name|upper }}{% else %}ДОРОГИ{% endif %}
                </h3>
                <div class="service-card-list">
                    {% if first_services_list.3 %}
                        <div class="service-item">{{ first_services_list.3.name|upper }}</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Custom Services Section (Davydov Style) -->
<section class="custom-services-section">
    <div class="container">
        <div class="custom-services-content">
            <!-- Left Side: Project Images -->
            <div class="services-images">
                {% if home_project_images %}
                    {% for project_image in home_project_images %}
                    <div class="project-mockup">
                        {% if project_image.image %}
                            <img src="{{ project_image.image.url }}" alt="{{ project_image.title|default:'Проект' }}">
                        {% else %}
                            <div class="mockup-placeholder">{{ project_image.title|default:"Проект" }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% endif %}
                <!-- Всегда показываем 4 блока, если изображений меньше - показываем плейсхолдеры -->
                {% for i in "1234"|make_list %}
                    {% if not home_project_images or forloop.counter > home_project_images|length %}
                    <div class="project-mockup">
                        <div class="mockup-placeholder">Проект {{ forloop.counter }}</div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Right Side: Service Descriptions -->
            <div class="services-text">
                <h2 class="services-main-title">ИНДИВИДУАЛЬНЫЕ СТРОИТЕЛЬНЫЕ РЕШЕНИЯ</h2>
                <p class="services-intro">Наша казахстанская строительная компания создает надежные инженерные решения и реализует строительные проекты полного цикла.</p>
                
                {% if individual_services %}
                    {% for service in individual_services %}
                    <div class="service-description-block">
                        <h3 class="service-block-title">{{ service.name|upper }}</h3>
                        <p class="service-block-text">{{ service.short_description }}</p>
                    </div>
                    {% endfor %}
                {% endif %}
                
                <a href="{% url 'services:service_list' %}" class="read-more-btn">читать далее</a>
            </div>
        </div>
    </div>
</section>

<!-- Full Cycle Section (Davydov Style) -->
<section class="full-cycle-section">
    <div class="container">
        <div class="full-cycle-content">
            <h2 class="full-cycle-title">ПОЛНЫЙ ЦИКЛ СТРОИТЕЛЬСТВА И ПРОЕКТИРОВАНИЯ В КАЗАХСТАНЕ</h2>
            <p class="full-cycle-description">Основная особенность и призвание казахстанской строительной компании Poligram - создание узнаваемого представления бренда в сфере строительства. Поэтому мы предоставляем нашим клиентам полный рабочий цикл для продвижения проектов в строительстве.</p>
            
            <!-- Cycle Diagram -->
            <div class="cycle-diagram">
                <!-- Center Icon -->
                <div class="cycle-center">
                    <div class="center-icon-wrapper">
                        <svg width="100" height="100" viewBox="0 0 100 100" fill="none">
                            <!-- Tree-like diagram -->
                            <circle cx="50" cy="20" r="8" fill="#60a5fa"/>
                            <circle cx="30" cy="40" r="6" fill="#60a5fa"/>
                            <circle cx="70" cy="40" r="6" fill="#60a5fa"/>
                            <circle cx="20" cy="60" r="5" fill="#60a5fa"/>
                            <circle cx="40" cy="60" r="5" fill="#60a5fa"/>
                            <circle cx="60" cy="60" r="5" fill="#60a5fa"/>
                            <circle cx="80" cy="60" r="5" fill="#60a5fa"/>
                            <circle cx="50" cy="80" r="4" fill="#60a5fa"/>
                            
                            <!-- Connecting lines -->
                            <line x1="50" y1="28" x2="30" y2="32" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="50" y1="28" x2="70" y2="32" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="30" y1="46" x2="20" y2="55" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="30" y1="46" x2="40" y2="55" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="70" y1="46" x2="60" y2="55" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="70" y1="46" x2="80" y2="55" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="40" y1="65" x2="50" y2="76" stroke="#60a5fa" stroke-width="2"/>
                            <line x1="60" y1="65" x2="50" y2="76" stroke="#60a5fa" stroke-width="2"/>
                        </svg>
                    </div>
                </div>
                
                <!-- Surrounding Elements -->
                <div class="cycle-item cycle-item-1">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <rect x="7" y="7" width="10" height="10" rx="1" ry="1"/>
                        </svg>
                    </div>
                    <div class="cycle-text">ПРОЕКТИРОВАНИЕ</div>
                </div>
                
                <div class="cycle-item cycle-item-2">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 21h18"/>
                            <path d="M5 21V7l8-4v18"/>
                            <path d="M19 21V11l-6-4"/>
                        </svg>
                    </div>
                    <div class="cycle-text">СТРОИТЕЛЬСТВО</div>
                </div>
                
                <div class="cycle-item cycle-item-3">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 2v20M2 12h20"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </div>
                    <div class="cycle-text">ИЗЫСКАНИЯ</div>
                </div>
                
                <div class="cycle-item cycle-item-4">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 12h20"/>
                            <path d="M6 8h12"/>
                            <path d="M6 16h12"/>
                        </svg>
                    </div>
                    <div class="cycle-text">ДОРОГИ</div>
                </div>
                
                <div class="cycle-item cycle-item-5">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 16h6v4H2v-4h6"/>
                            <rect x="6" y="6" width="12" height="10"/>
                            <path d="M12 2v4"/>
                        </svg>
                    </div>
                    <div class="cycle-text">МАТЕРИАЛЫ</div>
                </div>
                
                <div class="cycle-item cycle-item-6">
                    <div class="cycle-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                    </div>
                    <div class="cycle-text">СЕРТИФИКАТЫ</div>
                </div>
                
                <!-- Animated Ball -->
                <div class="cycle-ball"></div>
            </div>
        </div>
    </div>
</section>

<!-- Who We Are Section (Davydov Style) -->
<section class="who-we-are-section">
    <div class="container">
        <div class="who-we-are-content">
            <!-- Left Side: Text Content -->
            <div class="who-we-are-text">
                <h2 class="who-we-are-title">КТО МЫ</h2>
                
                {% if company %}
                <p class="who-we-are-description">{{ company.full_description|safe|truncatewords:50 }}</p>
                {% else %}
                <p class="who-we-are-description">В нашем строительном агентстве мы собрали под одной крышей экспертов из различных специальностей: строителей, инженеров-проектировщиков, программистов, маркетологов, специалистов по SEO, дизайнеров и UX UI специалистов.</p>
                <p class="who-we-are-description">Наша профессиональная команда позволяет нам охватить все аспекты строительства и предоставить комплексный продукт на новом уровне качества.</p>
                {% endif %}
                
                <!-- Statistics -->
                <div class="who-we-are-stats">
                    {% if key_figures %}
                        {% for figure in key_figures|slice:":3" %}
                        <div class="stat-block">
                            <div class="stat-number">{{ figure.value }}</div>
                            <div class="stat-label">{{ figure.description|upper }}</div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="stat-block">
                            <div class="stat-number">19+</div>
                            <div class="stat-label">ОПЫТ РАБОТЫ (лет)</div>
                        </div>
                        <div class="stat-block">
                            <div class="stat-number">8+</div>
                            <div class="stat-label">НАПРАВЛЕНИЙ</div>
                        </div>
                        <div class="stat-block">
                            <div class="stat-number">350+</div>
                            <div class="stat-label">УСПЕШНЫХ ПРОЕКТОВ</div>
                        </div>
                    {% endif %}
                </div>
                
                <a href="{% url 'core:about' %}" class="read-more-btn-white">читать далее</a>
            </div>
            
            <!-- Right Side: Project Mockups -->
            <div class="who-we-are-visuals">
                {% if who_we_are_images %}
                    {% for image in who_we_are_images %}
                    <div class="project-mockup-visual mockup-{{ forloop.counter }}">
                        {% if image.image %}
                            <img src="{{ image.image.url }}" alt="{{ image.title|default:'Изображение' }}" class="mockup-image-visual">
                        {% else %}
                            <div class="mockup-placeholder-visual">{{ image.title|default:"Изображение" }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% endif %}
                <!-- Показываем плейсхолдеры, если изображений меньше 4 -->
                {% for i in "1234"|make_list %}
                    {% if not who_we_are_images or forloop.counter > who_we_are_images|length %}
                    <div class="project-mockup-visual mockup-{{ forloop.counter }}">
                        <div class="mockup-placeholder-visual">Изображение {{ forloop.counter }}</div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Услуги из админки с якорными секциями -->
<section id="services-section" class="our-services-section">
    <div class="container">
        <div class="services-section-header">
            <h2 class="services-section-title">Наши услуги</h2>
            <p class="services-section-subtitle">Комплексные решения для ваших проектов</p>
        </div>
        
        <div class="services-grid" style="justify-content: center;">
            {% if first_home_service %}
                <div id="{{ first_home_service.slug }}" class="service-card" data-service="{{ first_home_service.slug }}" style="max-width: 500px;">
                    <div class="service-card-icon">
                        {% if first_home_service.icon_svg %}
                            {{ first_home_service.icon_svg|safe }}
                        {% else %}
                            <!-- Стандартная иконка по умолчанию -->
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <path d="M9 9h6v6H9z"/>
                            </svg>
                        {% endif %}
                    </div>
                    <h3 class="service-card-title">{{ first_home_service.name }}</h3>
                    <p class="service-card-description">{{ first_home_service.description }}</p>
                </div>
            {% else %}
                <!-- Заглушка, если нет услуг в админке -->
                <div id="genplan" class="service-card" data-service="genplan" style="max-width: 500px;">
                    <div class="service-card-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M9 9h6v6H9z"/>
                            <path d="M3 9h18M9 3v18"/>
                        </svg>
                    </div>
                    <h3 class="service-card-title">Генплан и градостроительство</h3>
                    <p class="service-card-description">Разработка генеральных планов и градостроительных решений для комплексного развития территорий.</p>
                </div>
            {% endif %}
        </div>
        
        <!-- Кнопка "Все услуги" -->
        <div style="text-align: center; margin-top: 3rem;">
            <a href="{% url 'core:all_services' %}" class="service-read-more-btn" style="display: inline-block; padding: 1rem 3rem; font-size: 1.1rem; background: #3b82f6; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s;">
                Все услуги
            </a>
        </div>
    </div>
</section>

<!-- Проекты отключены -->

<!-- Партнеры - Автоматическая карусель -->
<section class="partners-section">
    <div class="container">
        <h2 class="section-title">Наши партнеры</h2>
        <div class="partners-carousel-wrapper">
            <div class="partners-carousel">
                {% if clients %}
                    {% for client in clients %}
                    <div class="partner-item">
                        {% if client.logo %}
                            {% if client.website %}
                            <a href="{{ client.website }}" target="_blank" rel="noopener noreferrer">
                                <img src="{{ client.logo.url }}" alt="Партнер" class="partner-logo">
                            </a>
                            {% else %}
                            <img src="{{ client.logo.url }}" alt="Партнер" class="partner-logo">
                            {% endif %}
                        {% endif %}
                    </div>
                    {% endfor %}
                {% else %}
                    <!-- Default partners -->
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 1</div>
                    </div>
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 2</div>
                    </div>
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 3</div>
                    </div>
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 4</div>
                    </div>
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 5</div>
                    </div>
                    <div class="partner-item">
                        <div class="partner-placeholder">Партнер 6</div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Certificates Section (Davydov Style) -->
<section class="certificates-section">
    <div class="container">
        <div class="certificates-section-header">
            <h2 class="certificates-section-title">Наши сертификаты</h2>
            <p class="certificates-section-subtitle">Подтверждение качества и профессионализма</p>
        </div>
        
        <div class="certificates-grid">
            {% if certificates %}
                {% for certificate in certificates %}
                <div class="certificate-card" onclick="openCertificateModal('{{ certificate.image.url }}', '{{ certificate.title|escapejs }}', '{{ certificate.number|escapejs }}', '{{ certificate.issuer|escapejs }}', '{{ certificate.issue_date|date:"d.m.Y" }}', '{% if certificate.expiry_date %}{{ certificate.expiry_date|date:"d.m.Y" }}{% else %}Бессрочно{% endif %}')">
                    {% if certificate.image %}
                    <div class="certificate-image-wrapper">
                        <img src="{{ certificate.image.url }}" alt="{{ certificate.title }}" class="certificate-image">
                        <div class="certificate-overlay">
                            <div class="certificate-info">
                                <div class="certificate-view-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </div>
                                <span class="certificate-view-text">Просмотр</span>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    <div class="certificate-content">
                        <h3 class="certificate-title">{{ certificate.title }}</h3>
                        <p class="certificate-number">№ {{ certificate.number }}</p>
                        <p class="certificate-issuer">{{ certificate.issuer }}</p>
                        <div class="certificate-date">
                            <span class="certificate-date-label">Выдан:</span>
                            <span class="certificate-date-value">{{ certificate.issue_date|date:"d.m.Y" }}</span>
                        </div>
                        {% if certificate.expiry_date %}
                        <div class="certificate-validity {% if certificate.is_valid %}valid{% else %}expired{% endif %}">
                            <span class="certificate-validity-label">Действует до:</span>
                            <span class="certificate-validity-value">{{ certificate.expiry_date|date:"d.m.Y" }}</span>
                        </div>
                        {% else %}
                        <div class="certificate-validity valid">
                            <span class="certificate-validity-label">Статус:</span>
                            <span class="certificate-validity-value">Бессрочно</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Placeholder certificates -->
                <div class="certificate-card">
                    <div class="certificate-image-wrapper">
                        <div class="certificate-placeholder">Сертификат 1</div>
                    </div>
                    <div class="certificate-content">
                        <h3 class="certificate-title">Сертификат качества</h3>
                        <p class="certificate-number">№ 001</p>
                    </div>
                </div>
                <div class="certificate-card">
                    <div class="certificate-image-wrapper">
                        <div class="certificate-placeholder">Сертификат 2</div>
                    </div>
                    <div class="certificate-content">
                        <h3 class="certificate-title">Сертификат качества</h3>
                        <p class="certificate-number">№ 002</p>
                    </div>
                </div>
            {% endif %}
        </div>
        
        {% if certificates|length > 6 %}
        <div class="certificates-more-wrapper">
            <a href="{% url 'core:certificates' %}" class="certificates-more-btn">Все сертификаты</a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Certificate Modal -->
<div id="certificateModal" class="certificate-modal" onclick="closeCertificateModal()">
    <div class="certificate-modal-content" onclick="event.stopPropagation()">
        <span class="certificate-modal-close" onclick="closeCertificateModal()">&times;</span>
        <div class="certificate-modal-image-container">
            <img id="certificateModalImage" src="" alt="Сертификат" class="certificate-modal-image">
        </div>
        <div class="certificate-modal-info">
            <h3 id="certificateModalTitle" class="certificate-modal-title"></h3>
            <p class="certificate-modal-detail"><strong>Номер:</strong> <span id="certificateModalNumber"></span></p>
            <p class="certificate-modal-detail"><strong>Выдан:</strong> <span id="certificateModalIssuer"></span></p>
            <p class="certificate-modal-detail"><strong>Дата выдачи:</strong> <span id="certificateModalIssueDate"></span></p>
            <p class="certificate-modal-detail"><strong>Действует до:</strong> <span id="certificateModalExpiryDate"></span></p>
        </div>
    </div>
</div>

<!-- Licenses Section -->
<section class="licenses-section">
    <div class="container">
        <h2 class="section-title">Наши лицензии</h2>
        <div class="licenses-grid">
            {% if licenses %}
                {% for license in licenses %}
                {% if license.file %}
                    {% if license.is_image %}
                    <div class="license-item" onclick="openLicenseModal('{{ license.file.url }}', '{{ license.title|default:"Лицензия" }}', 'image')">
                        <img src="{{ license.file.url }}" alt="{{ license.title|default:'Лицензия' }}" class="license-image">
                    </div>
                    {% elif license.is_pdf %}
                    <div class="license-item license-item-pdf" onclick="openLicenseModal('{{ license.file.url }}', '{{ license.title|default:"Лицензия" }}', 'pdf')">
                        <canvas class="license-pdf-preview" data-pdf-url="{{ license.file.url }}"></canvas>
                        <div class="license-pdf-overlay">
                            <span class="license-pdf-badge">PDF</span>
                        </div>
                    </div>
                    {% endif %}
                {% endif %}
                {% endfor %}
            {% else %}
                <!-- Default licenses -->
                <div class="license-item">
                    <div class="license-placeholder">Лицензия 1</div>
                </div>
                <div class="license-item">
                    <div class="license-placeholder">Лицензия 2</div>
                </div>
                <div class="license-item">
                    <div class="license-placeholder">Лицензия 3</div>
                </div>
                <div class="license-item">
                    <div class="license-placeholder">Лицензия 4</div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- License Modal -->
<div id="licenseModal" class="license-modal" onclick="closeLicenseModal()">
    <div class="license-modal-content" onclick="event.stopPropagation()">
        <span class="license-modal-close" onclick="closeLicenseModal()">&times;</span>
        <div id="licenseModalImageContainer" class="license-modal-image-container">
            <img id="licenseModalImage" src="" alt="Лицензия" class="license-modal-image" style="display: none;">
            <iframe id="licenseModalPdf" src="" class="license-modal-pdf" style="display: none;"></iframe>
        </div>
        <p id="licenseModalTitle" class="license-modal-title"></p>
        <a id="licenseModalDownload" href="" download class="license-modal-download" style="display: none;">Скачать файл</a>
    </div>
</div>

<!-- Contact Form Section (Davydov Style) -->
<section class="contact-form-section">
    <div class="container">
        <h2 class="contact-form-title">СВЯЗАТЬСЯ С НАМИ</h2>
        <form method="post" action="{% url 'contact:contact' %}" class="davydov-contact-form">
            {% csrf_token %}
            <div class="form-group">
                <input type="text" name="name" id="id_name" placeholder="Имя" required>
            </div>
            <div class="form-group">
                <input type="email" name="email" id="id_email" placeholder="Электронная почта" required>
            </div>
            <div class="form-group">
                <textarea name="message" id="id_message" placeholder="Ваше сообщение" rows="6" required></textarea>
            </div>
            <!-- Скрытые поля для совместимости с моделью -->
            <input type="hidden" name="subject" value="Запрос с главной страницы">
            <div class="form-group">
                <button type="submit" class="submit-btn">ОТПРАВИТЬ</button>
            </div>
        </form>
    </div>
</section>

<script>
    // Hero scroll indicator
    document.addEventListener('DOMContentLoaded', function() {
        const scrollIndicator = document.querySelector('.hero-scroll-indicator');
        if (scrollIndicator) {
            scrollIndicator.addEventListener('click', function() {
                window.scrollTo({
                    top: window.innerHeight,
                    behavior: 'smooth'
                });
            });
        }
    });
</script>

{% endblock %}